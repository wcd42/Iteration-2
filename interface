from PyQt6 import QtWidgets, uic
from PyQt6.QtGui import QAction

from Course import Course
from CourseLocation import CourseLocation
from CourseRequest import CourseRequest
from datetime import date, time


class CourseRequestGUI(QtWidgets.QWidget.QMainWindow):

    def __init__(self):
        super(CourseRequestGUI, self).__init__()
        uic.loadUi("CRGUI", self)

        self.submitbtn.clicked.connect(self.submit_button_pressed)

    def submit_button_pressed(self):
        course = self.course_field.text()
        courseDate = self.coursedate_field.text()
        courseTime = self.coursetime_field.text()
        courseLocation = self.courselocation_field.text()

        coursereqlist = course.split(", ")
        courseID = coursereqlist[0]
        courseName = coursereqlist[1]
        courseResponsible = coursereqlist[2]
        truecourse = f"{courseID}, {courseName}, {courseResponsible}"

        coursedatelist = courseDate.split(", ")
        coursedateyear = int(coursedatelist[0])
        coursedatemonth = int(coursedatelist[1])
        coursedateday = int(coursedatelist[2])
        truecoursedate = f"{coursedateyear}, {coursedatemonth}, {coursedateday}"

        coursetimelist = courseTime.split(", ")
        coursetimehour = int(coursetimelist[0])
        coursetimeminute = int(coursetimelist[1])

        courselocationlist = courseLocation.split(", ")
        courselocationid = courselocationlist[0]
        courselocationaddress = courselocationlist[1]

        courserequest = CourseRequest(Course(courseID, courseName, courseResponsible),
                                      date(coursedateyear, coursedatemonth, coursedateday),
                                      time(coursetimehour, coursetimeminute),
                                      CourseLocation(courselocationid, courselocationaddress))
